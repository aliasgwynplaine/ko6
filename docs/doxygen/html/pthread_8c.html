<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ko6: /users/enseig/franck/ko6/src/soft/ulib/pthread.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo55.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ko6
   </div>
   <div id="projectbrief">ko6 (prononce it &#39;kit-O-sys&#39; O is  the letter not the number) is a small operating system for educationnal purpose</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_8785740846211ac34fd04c61a1fdd888.html">soft</a></li><li class="navelem"><a class="el" href="dir_0deec77e96e8185c409485dbeaa1ebd7.html">ulib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">pthread.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="libc_8h_source.html">libc.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="pthread_8h_source.html">pthread.h</a>&gt;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a334f18a58e25ecc72e490c91cea67547"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread_8c.html#a334f18a58e25ecc72e490c91cea67547">thread_start</a> (void *(*fun)(void *), void *arg)</td></tr>
<tr class="memdesc:a334f18a58e25ecc72e490c91cea67547"><td class="mdescLeft">&#160;</td><td class="mdescRight">pthread_start is the function called by the kernel at the true start of a thread  <a href="#a334f18a58e25ecc72e490c91cea67547">More...</a><br/></td></tr>
<tr class="separator:a334f18a58e25ecc72e490c91cea67547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57aa485fb15bd7f307777cef1a074d28"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread_8c.html#a57aa485fb15bd7f307777cef1a074d28">pthread_create</a> (<a class="el" href="pthread_8h.html#af76921f9c4d382336c266fc967017636">pthread_t</a> *thread, <a class="el" href="pthread_8h.html#aa1f53c172f469781ac957e8d01322c43">pthread_attr_t</a> *attr, void *(*fun)(void *), void *arg)</td></tr>
<tr class="memdesc:a57aa485fb15bd7f307777cef1a074d28"><td class="mdescLeft">&#160;</td><td class="mdescRight">asks the kernel via a syscall to start a new thread by invoking fun(arg) fun() can stop the thread by calling thread_exit(value) or if it returns a value, it is equivalent to call thread_exit with this value The state of the new thread is TH_STATE_READY.  <a href="#a57aa485fb15bd7f307777cef1a074d28">More...</a><br/></td></tr>
<tr class="separator:a57aa485fb15bd7f307777cef1a074d28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeff2e6e14c407e3d02076ecae842bcca"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread_8c.html#aeff2e6e14c407e3d02076ecae842bcca">pthread_yield</a> (void)</td></tr>
<tr class="memdesc:aeff2e6e14c407e3d02076ecae842bcca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Causes the current thread to give up the CPU in order to give it to another.  <a href="#aeff2e6e14c407e3d02076ecae842bcca">More...</a><br/></td></tr>
<tr class="separator:aeff2e6e14c407e3d02076ecae842bcca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23b28e0f8ac5af2b46a33cdab3a80e44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread_8c.html#a23b28e0f8ac5af2b46a33cdab3a80e44">pthread_exit</a> (void *retval)</td></tr>
<tr class="memdesc:a23b28e0f8ac5af2b46a33cdab3a80e44"><td class="mdescLeft">&#160;</td><td class="mdescRight">terminates the current thread and returns retval  <a href="#a23b28e0f8ac5af2b46a33cdab3a80e44">More...</a><br/></td></tr>
<tr class="separator:a23b28e0f8ac5af2b46a33cdab3a80e44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02cfe68dc8f379c88d448172f997b09e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread_8c.html#a02cfe68dc8f379c88d448172f997b09e">sched_dump</a> (void)</td></tr>
<tr class="memdesc:a02cfe68dc8f379c88d448172f997b09e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays on the console (tty0) all active threads, it is for debugging.  <a href="#a02cfe68dc8f379c88d448172f997b09e">More...</a><br/></td></tr>
<tr class="separator:a02cfe68dc8f379c88d448172f997b09e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a471c1323d7564c8a6244f105c0e3e8f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread_8c.html#a471c1323d7564c8a6244f105c0e3e8f1">pthread_join</a> (<a class="el" href="pthread_8h.html#af76921f9c4d382336c266fc967017636">pthread_t</a> thread, void **retval)</td></tr>
<tr class="memdesc:a471c1323d7564c8a6244f105c0e3e8f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">wait for a thread termination  <a href="#a471c1323d7564c8a6244f105c0e3e8f1">More...</a><br/></td></tr>
<tr class="separator:a471c1323d7564c8a6244f105c0e3e8f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2d27287a87adaab0c6bbb23ec3e529e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread_8c.html#ae2d27287a87adaab0c6bbb23ec3e529e">pthread_mutex_init</a> (<a class="el" href="pthread_8h.html#aa13253d3ede7200917f21c685a49d256">pthread_mutex_t</a> *mutex, <a class="el" href="pthread_8h.html#ab7433c31c2d1fdefd1465dc2204de989">pthread_mutexattr_t</a> *attr)</td></tr>
<tr class="memdesc:ae2d27287a87adaab0c6bbb23ec3e529e"><td class="mdescLeft">&#160;</td><td class="mdescRight">creates a new mutex and initializes mutex variable with the new mutex (side effect) it is a mutex with error checking  <a href="#ae2d27287a87adaab0c6bbb23ec3e529e">More...</a><br/></td></tr>
<tr class="separator:ae2d27287a87adaab0c6bbb23ec3e529e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cf620ff3a40af11d79cf28901dc55e2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread_8c.html#a3cf620ff3a40af11d79cf28901dc55e2">pthread_mutex_destroy</a> (<a class="el" href="pthread_8h.html#aa13253d3ede7200917f21c685a49d256">pthread_mutex_t</a> *mutex)</td></tr>
<tr class="memdesc:a3cf620ff3a40af11d79cf28901dc55e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">destroy the referenced mutex If the mutex is locked the destruction is not done, this is an error  <a href="#a3cf620ff3a40af11d79cf28901dc55e2">More...</a><br/></td></tr>
<tr class="separator:a3cf620ff3a40af11d79cf28901dc55e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12809c44718c21544ceb280dc1a53573"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread_8c.html#a12809c44718c21544ceb280dc1a53573">pthread_mutex_lock</a> (<a class="el" href="pthread_8h.html#aa13253d3ede7200917f21c685a49d256">pthread_mutex_t</a> *mutex)</td></tr>
<tr class="memdesc:a12809c44718c21544ceb280dc1a53573"><td class="mdescLeft">&#160;</td><td class="mdescRight">lock the referenced mutex, it is a blocking operation. If the mutex is already locked, the calling thread blocks until the mutex becomes available. If the mutex does not exist or is already locked, this is an error  <a href="#a12809c44718c21544ceb280dc1a53573">More...</a><br/></td></tr>
<tr class="separator:a12809c44718c21544ceb280dc1a53573"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96184290ffb60e04c53a52869cf960a2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread_8c.html#a96184290ffb60e04c53a52869cf960a2">pthread_mutex_unlock</a> (<a class="el" href="pthread_8h.html#aa13253d3ede7200917f21c685a49d256">pthread_mutex_t</a> *mutex)</td></tr>
<tr class="memdesc:a96184290ffb60e04c53a52869cf960a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">unlock the referenced mutex If the mutex does not exist or is not locked or has been locked by another, this is an error that causes exit with error  <a href="#a96184290ffb60e04c53a52869cf960a2">More...</a><br/></td></tr>
<tr class="separator:a96184290ffb60e04c53a52869cf960a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad99d3bb02ea2b98fbf98fdb24d32adb3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread_8c.html#ad99d3bb02ea2b98fbf98fdb24d32adb3">pthread_barrier_init</a> (<a class="el" href="pthread_8h.html#ac97967a2700653f458a949449411c7cb">pthread_barrier_t</a> *<a class="el" href="barrier_2main_8c.html#a779bfbbb688cf46720cfb65109ea4858">barrier</a>, <a class="el" href="pthread_8h.html#a7e975afcd4298de90c6ba1a236de12a9">pthread_barrierattr_t</a> *attr, size_t count)</td></tr>
<tr class="memdesc:ad99d3bb02ea2b98fbf98fdb24d32adb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">creates or initialize a barrier depending the value of barrier parameter  <a href="#ad99d3bb02ea2b98fbf98fdb24d32adb3">More...</a><br/></td></tr>
<tr class="separator:ad99d3bb02ea2b98fbf98fdb24d32adb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8ef9b4e2d7feaa1a28159991e7433ac"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread_8c.html#ae8ef9b4e2d7feaa1a28159991e7433ac">pthread_barrier_destroy</a> (<a class="el" href="pthread_8h.html#ac97967a2700653f458a949449411c7cb">pthread_barrier_t</a> *<a class="el" href="barrier_2main_8c.html#a779bfbbb688cf46720cfb65109ea4858">barrier</a>)</td></tr>
<tr class="memdesc:ae8ef9b4e2d7feaa1a28159991e7433ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">destroy the referenced barrier If a thread is waiting at the barrier, then the destruction is not done, it is an error  <a href="#ae8ef9b4e2d7feaa1a28159991e7433ac">More...</a><br/></td></tr>
<tr class="separator:ae8ef9b4e2d7feaa1a28159991e7433ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85f92053b4d12aa94927b364b5b757d9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pthread_8c.html#a85f92053b4d12aa94927b364b5b757d9">pthread_barrier_wait</a> (<a class="el" href="pthread_8h.html#ac97967a2700653f458a949449411c7cb">pthread_barrier_t</a> *<a class="el" href="barrier_2main_8c.html#a779bfbbb688cf46720cfb65109ea4858">barrier</a>)</td></tr>
<tr class="memdesc:a85f92053b4d12aa94927b364b5b757d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">wait to the referenced barrier, it is a blocking operation for all thread but the last the last arrived thread doesn't wait and notifies the other threads which becomes READY  <a href="#a85f92053b4d12aa94927b364b5b757d9">More...</a><br/></td></tr>
<tr class="separator:a85f92053b4d12aa94927b364b5b757d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ae8ef9b4e2d7feaa1a28159991e7433ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pthread_barrier_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pthread_8h.html#ac97967a2700653f458a949449411c7cb">pthread_barrier_t</a> *&#160;</td>
          <td class="paramname"><em>barrier</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>destroy the referenced barrier If a thread is waiting at the barrier, then the destruction is not done, it is an error </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">barrier</td><td>a pointer referencing a barrier </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SUCCESS if it all goes fine or EINVAL wrong argument EBUSY The implementation has detected an attempt to destroy a barrier while it is in use (for example, while being used in a <a class="el" href="ksynchro_8c.html#aea6f07b8093fabd5e248aae8b7e64abb" title="wait to the referenced barrier, it is a blocking operation for all thread but the last the last arriv...">thread_barrier_wait()</a> call) by another thread. </dd></dl>

<p>References <a class="el" href="syscalls_8h.html#a1381b417b795b6cd16ae37c078862a38">SYSCALL_BARRIER_DESTROY</a>, and <a class="el" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a>.</p>
<div class="fragment"><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;{</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a> ((<span class="keywordtype">int</span>)<a class="code" href="barrier_2main_8c.html#a779bfbbb688cf46720cfb65109ea4858">barrier</a>, 0, 0, 0, <a class="code" href="syscalls_8h.html#a1381b417b795b6cd16ae37c078862a38">SYSCALL_BARRIER_DESTROY</a>);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;}</div>
<div class="ttc" id="mips_2cpu__user_8S_html_a2824a7b580dd3afd46068b42af360fa6"><div class="ttname"><a href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a></div><div class="ttdeci">globl syscall_fct syscall_fct</div><div class="ttdef"><b>Definition:</b> cpu_user.S:21</div></div>
<div class="ttc" id="syscalls_8h_html_a1381b417b795b6cd16ae37c078862a38"><div class="ttname"><a href="syscalls_8h.html#a1381b417b795b6cd16ae37c078862a38">SYSCALL_BARRIER_DESTROY</a></div><div class="ttdeci">#define SYSCALL_BARRIER_DESTROY</div><div class="ttdef"><b>Definition:</b> syscalls.h:39</div></div>
<div class="ttc" id="barrier_2main_8c_html_a779bfbbb688cf46720cfb65109ea4858"><div class="ttname"><a href="barrier_2main_8c.html#a779bfbbb688cf46720cfb65109ea4858">barrier</a></div><div class="ttdeci">pthread_barrier_t barrier</div><div class="ttdef"><b>Definition:</b> main.c:20</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad99d3bb02ea2b98fbf98fdb24d32adb3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pthread_barrier_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pthread_8h.html#ac97967a2700653f458a949449411c7cb">pthread_barrier_t</a> *&#160;</td>
          <td class="paramname"><em>barrier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pthread_8h.html#a7e975afcd4298de90c6ba1a236de12a9">pthread_barrierattr_t</a> *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>creates or initialize a barrier depending the value of barrier parameter </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">barrier</td><td>a pointer referencing the barrier, there are two cases 1) if *barrier == NULL then allocate a new barrier, then initialize count 2) if *barrier != NULL it the barrier already exists, just initialize count </td></tr>
    <tr><td class="paramname">attr</td><td>a pointer to the attribute of the new barrier (NULL for default) </td></tr>
    <tr><td class="paramname">count</td><td>number of expected threads for this barrier </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SUCCESS if it all goes fine or EINVAL The value specified by count is equal to zero. ENOMEM Insufficient memory exists to initialize the barrier EBUSY The implementation has detected an attempt to reinitialize a barrier while it is in use (for example, while being used in a <a class="el" href="ksynchro_8c.html#aea6f07b8093fabd5e248aae8b7e64abb" title="wait to the referenced barrier, it is a blocking operation for all thread but the last the last arriv...">thread_barrier_wait()</a> call) by another thread. </dd></dl>

<p>References <a class="el" href="syscalls_8h.html#a026c84ef7c3e101d665208d89b369b6c">SYSCALL_BARRIER_INIT</a>, and <a class="el" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a>.</p>

<p>Referenced by <a class="el" href="crt0_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;{</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a> ((<span class="keywordtype">int</span>)<a class="code" href="barrier_2main_8c.html#a779bfbbb688cf46720cfb65109ea4858">barrier</a>, (<span class="keywordtype">int</span>) count, (<span class="keywordtype">int</span>) attr, 0, <a class="code" href="syscalls_8h.html#a026c84ef7c3e101d665208d89b369b6c">SYSCALL_BARRIER_INIT</a>);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;}</div>
<div class="ttc" id="mips_2cpu__user_8S_html_a2824a7b580dd3afd46068b42af360fa6"><div class="ttname"><a href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a></div><div class="ttdeci">globl syscall_fct syscall_fct</div><div class="ttdef"><b>Definition:</b> cpu_user.S:21</div></div>
<div class="ttc" id="barrier_2main_8c_html_a779bfbbb688cf46720cfb65109ea4858"><div class="ttname"><a href="barrier_2main_8c.html#a779bfbbb688cf46720cfb65109ea4858">barrier</a></div><div class="ttdeci">pthread_barrier_t barrier</div><div class="ttdef"><b>Definition:</b> main.c:20</div></div>
<div class="ttc" id="syscalls_8h_html_a026c84ef7c3e101d665208d89b369b6c"><div class="ttname"><a href="syscalls_8h.html#a026c84ef7c3e101d665208d89b369b6c">SYSCALL_BARRIER_INIT</a></div><div class="ttdeci">#define SYSCALL_BARRIER_INIT</div><div class="ttdef"><b>Definition:</b> syscalls.h:37</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a85f92053b4d12aa94927b364b5b757d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pthread_barrier_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pthread_8h.html#ac97967a2700653f458a949449411c7cb">pthread_barrier_t</a> *&#160;</td>
          <td class="paramname"><em>barrier</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>wait to the referenced barrier, it is a blocking operation for all thread but the last the last arrived thread doesn't wait and notifies the other threads which becomes READY </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">barrier</td><td>a pointer referencing a barrier </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SUCCESS or FEALURE </dd></dl>

<p>References <a class="el" href="syscalls_8h.html#aa2c79dbb3d9d284094852336eead340a">SYSCALL_BARRIER_WAIT</a>, and <a class="el" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a>.</p>
<div class="fragment"><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;{</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a> ((<span class="keywordtype">int</span>)<a class="code" href="barrier_2main_8c.html#a779bfbbb688cf46720cfb65109ea4858">barrier</a>, 0, 0, 0, <a class="code" href="syscalls_8h.html#aa2c79dbb3d9d284094852336eead340a">SYSCALL_BARRIER_WAIT</a>);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div>
<div class="ttc" id="mips_2cpu__user_8S_html_a2824a7b580dd3afd46068b42af360fa6"><div class="ttname"><a href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a></div><div class="ttdeci">globl syscall_fct syscall_fct</div><div class="ttdef"><b>Definition:</b> cpu_user.S:21</div></div>
<div class="ttc" id="syscalls_8h_html_aa2c79dbb3d9d284094852336eead340a"><div class="ttname"><a href="syscalls_8h.html#aa2c79dbb3d9d284094852336eead340a">SYSCALL_BARRIER_WAIT</a></div><div class="ttdeci">#define SYSCALL_BARRIER_WAIT</div><div class="ttdef"><b>Definition:</b> syscalls.h:38</div></div>
<div class="ttc" id="barrier_2main_8c_html_a779bfbbb688cf46720cfb65109ea4858"><div class="ttname"><a href="barrier_2main_8c.html#a779bfbbb688cf46720cfb65109ea4858">barrier</a></div><div class="ttdeci">pthread_barrier_t barrier</div><div class="ttdef"><b>Definition:</b> main.c:20</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a57aa485fb15bd7f307777cef1a074d28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pthread_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pthread_8h.html#af76921f9c4d382336c266fc967017636">pthread_t</a> *&#160;</td>
          <td class="paramname"><em>thread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pthread_8h.html#aa1f53c172f469781ac957e8d01322c43">pthread_attr_t</a> *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *(*)(void *)&#160;</td>
          <td class="paramname"><em>fun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>asks the kernel via a syscall to start a new thread by invoking fun(arg) fun() can stop the thread by calling thread_exit(value) or if it returns a value, it is equivalent to call thread_exit with this value The state of the new thread is TH_STATE_READY. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thread</td><td>pointer to the thread structure </td></tr>
    <tr><td class="paramname">attr</td><td>pointer to the thread atribute structure (default if NULL) </td></tr>
    <tr><td class="paramname">fun</td><td>pointer to the function of the thread </td></tr>
    <tr><td class="paramname">arg</td><td>the argument given to fun() </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a>, <a class="el" href="syscalls_8h.html#a63de1298da2951a6a80a60ba2e81f3cc">SYSCALL_THREAD_CREATE</a>, and <a class="el" href="pthread_8c.html#a334f18a58e25ecc72e490c91cea67547">thread_start()</a>.</p>

<p>Referenced by <a class="el" href="crt0_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;{</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a> ((<span class="keywordtype">int</span>)thread, (<span class="keywordtype">int</span>)fun, (<span class="keywordtype">int</span>)arg, (<span class="keywordtype">int</span>)<a class="code" href="pthread_8c.html#a334f18a58e25ecc72e490c91cea67547">thread_start</a>, <a class="code" href="syscalls_8h.html#a63de1298da2951a6a80a60ba2e81f3cc">SYSCALL_THREAD_CREATE</a>);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;}</div>
<div class="ttc" id="pthread_8c_html_a334f18a58e25ecc72e490c91cea67547"><div class="ttname"><a href="pthread_8c.html#a334f18a58e25ecc72e490c91cea67547">thread_start</a></div><div class="ttdeci">static void thread_start(void *(*fun)(void *), void *arg)</div><div class="ttdoc">pthread_start is the function called by the kernel at the true start of a thread </div><div class="ttdef"><b>Definition:</b> pthread.c:28</div></div>
<div class="ttc" id="mips_2cpu__user_8S_html_a2824a7b580dd3afd46068b42af360fa6"><div class="ttname"><a href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a></div><div class="ttdeci">globl syscall_fct syscall_fct</div><div class="ttdef"><b>Definition:</b> cpu_user.S:21</div></div>
<div class="ttc" id="syscalls_8h_html_a63de1298da2951a6a80a60ba2e81f3cc"><div class="ttname"><a href="syscalls_8h.html#a63de1298da2951a6a80a60ba2e81f3cc">SYSCALL_THREAD_CREATE</a></div><div class="ttdeci">#define SYSCALL_THREAD_CREATE</div><div class="ttdef"><b>Definition:</b> syscalls.h:28</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a23b28e0f8ac5af2b46a33cdab3a80e44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pthread_exit </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>retval</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>terminates the current thread and returns retval </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">retval</td><td>the value can be retrieved by calling the thread_join function of another thread </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a>, and <a class="el" href="syscalls_8h.html#ab38bbbfadd5c56dcd1a4bf2f2f108f8b">SYSCALL_THREAD_EXIT</a>.</p>

<p>Referenced by <a class="el" href="pthread_8c.html#a334f18a58e25ecc72e490c91cea67547">thread_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a> ((<span class="keywordtype">int</span>)retval, 0, 0, 0, <a class="code" href="syscalls_8h.html#ab38bbbfadd5c56dcd1a4bf2f2f108f8b">SYSCALL_THREAD_EXIT</a>);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div>
<div class="ttc" id="mips_2cpu__user_8S_html_a2824a7b580dd3afd46068b42af360fa6"><div class="ttname"><a href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a></div><div class="ttdeci">globl syscall_fct syscall_fct</div><div class="ttdef"><b>Definition:</b> cpu_user.S:21</div></div>
<div class="ttc" id="syscalls_8h_html_ab38bbbfadd5c56dcd1a4bf2f2f108f8b"><div class="ttname"><a href="syscalls_8h.html#ab38bbbfadd5c56dcd1a4bf2f2f108f8b">SYSCALL_THREAD_EXIT</a></div><div class="ttdeci">#define SYSCALL_THREAD_EXIT</div><div class="ttdef"><b>Definition:</b> syscalls.h:30</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a471c1323d7564c8a6244f105c0e3e8f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pthread_join </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pthread_8h.html#af76921f9c4d382336c266fc967017636">pthread_t</a>&#160;</td>
          <td class="paramname"><em>thread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>retval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>wait for a thread termination </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thread</td><td>expected thread </td></tr>
    <tr><td class="paramname">retval</td><td>pointer to the return value of the expected thread </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a>, and <a class="el" href="syscalls_8h.html#ad4d7571cbeb659d57fd4d92ae1924082">SYSCALL_THREAD_JOIN</a>.</p>

<p>Referenced by <a class="el" href="crt0_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;{</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a> ((<span class="keywordtype">int</span>)thread, (<span class="keywordtype">int</span>)retval, 0, 0, <a class="code" href="syscalls_8h.html#ad4d7571cbeb659d57fd4d92ae1924082">SYSCALL_THREAD_JOIN</a>);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;}</div>
<div class="ttc" id="mips_2cpu__user_8S_html_a2824a7b580dd3afd46068b42af360fa6"><div class="ttname"><a href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a></div><div class="ttdeci">globl syscall_fct syscall_fct</div><div class="ttdef"><b>Definition:</b> cpu_user.S:21</div></div>
<div class="ttc" id="syscalls_8h_html_ad4d7571cbeb659d57fd4d92ae1924082"><div class="ttname"><a href="syscalls_8h.html#ad4d7571cbeb659d57fd4d92ae1924082">SYSCALL_THREAD_JOIN</a></div><div class="ttdeci">#define SYSCALL_THREAD_JOIN</div><div class="ttdef"><b>Definition:</b> syscalls.h:32</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3cf620ff3a40af11d79cf28901dc55e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pthread_mutex_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pthread_8h.html#aa13253d3ede7200917f21c685a49d256">pthread_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>destroy the referenced mutex If the mutex is locked the destruction is not done, this is an error </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>a pointer referencing a mutex </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, 1 on fealure </dd></dl>

<p>References <a class="el" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a>, and <a class="el" href="syscalls_8h.html#ad87d7bb44b389a78ec06709fa5fbc23a">SYSCALL_MUTEX_DESTROY</a>.</p>
<div class="fragment"><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;{</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a> ((<span class="keywordtype">int</span>)mutex, 0, 0, 0, <a class="code" href="syscalls_8h.html#ad87d7bb44b389a78ec06709fa5fbc23a">SYSCALL_MUTEX_DESTROY</a>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div>
<div class="ttc" id="mips_2cpu__user_8S_html_a2824a7b580dd3afd46068b42af360fa6"><div class="ttname"><a href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a></div><div class="ttdeci">globl syscall_fct syscall_fct</div><div class="ttdef"><b>Definition:</b> cpu_user.S:21</div></div>
<div class="ttc" id="syscalls_8h_html_ad87d7bb44b389a78ec06709fa5fbc23a"><div class="ttname"><a href="syscalls_8h.html#ad87d7bb44b389a78ec06709fa5fbc23a">SYSCALL_MUTEX_DESTROY</a></div><div class="ttdeci">#define SYSCALL_MUTEX_DESTROY</div><div class="ttdef"><b>Definition:</b> syscalls.h:36</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae2d27287a87adaab0c6bbb23ec3e529e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pthread_mutex_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pthread_8h.html#aa13253d3ede7200917f21c685a49d256">pthread_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pthread_8h.html#ab7433c31c2d1fdefd1465dc2204de989">pthread_mutexattr_t</a> *&#160;</td>
          <td class="paramname"><em>attr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>creates a new mutex and initializes mutex variable with the new mutex (side effect) it is a mutex with error checking </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>a pointer referencing the new mutex </td></tr>
    <tr><td class="paramname">attr</td><td>a pointer to the attribute of the new mutex (NULL for default) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, 1 on fealure </dd></dl>

<p>References <a class="el" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a>, and <a class="el" href="syscalls_8h.html#aa7c4dd1815b9890594a76a9c23db75e3">SYSCALL_MUTEX_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;{</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a> ((<span class="keywordtype">int</span>)mutex, 0, 0, 0, <a class="code" href="syscalls_8h.html#aa7c4dd1815b9890594a76a9c23db75e3">SYSCALL_MUTEX_INIT</a>);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;}</div>
<div class="ttc" id="mips_2cpu__user_8S_html_a2824a7b580dd3afd46068b42af360fa6"><div class="ttname"><a href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a></div><div class="ttdeci">globl syscall_fct syscall_fct</div><div class="ttdef"><b>Definition:</b> cpu_user.S:21</div></div>
<div class="ttc" id="syscalls_8h_html_aa7c4dd1815b9890594a76a9c23db75e3"><div class="ttname"><a href="syscalls_8h.html#aa7c4dd1815b9890594a76a9c23db75e3">SYSCALL_MUTEX_INIT</a></div><div class="ttdeci">#define SYSCALL_MUTEX_INIT</div><div class="ttdef"><b>Definition:</b> syscalls.h:33</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a12809c44718c21544ceb280dc1a53573"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pthread_mutex_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pthread_8h.html#aa13253d3ede7200917f21c685a49d256">pthread_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>lock the referenced mutex, it is a blocking operation. If the mutex is already locked, the calling thread blocks until the mutex becomes available. If the mutex does not exist or is already locked, this is an error </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>a pointer referencing a mutex </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, 1 on fealure </dd></dl>

<p>References <a class="el" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a>, and <a class="el" href="syscalls_8h.html#ad83026e97bed8a463c5a955867011e8d">SYSCALL_MUTEX_LOCK</a>.</p>
<div class="fragment"><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a> ((<span class="keywordtype">int</span>)mutex, 0, 0, 0, <a class="code" href="syscalls_8h.html#ad83026e97bed8a463c5a955867011e8d">SYSCALL_MUTEX_LOCK</a>);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;}</div>
<div class="ttc" id="mips_2cpu__user_8S_html_a2824a7b580dd3afd46068b42af360fa6"><div class="ttname"><a href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a></div><div class="ttdeci">globl syscall_fct syscall_fct</div><div class="ttdef"><b>Definition:</b> cpu_user.S:21</div></div>
<div class="ttc" id="syscalls_8h_html_ad83026e97bed8a463c5a955867011e8d"><div class="ttname"><a href="syscalls_8h.html#ad83026e97bed8a463c5a955867011e8d">SYSCALL_MUTEX_LOCK</a></div><div class="ttdeci">#define SYSCALL_MUTEX_LOCK</div><div class="ttdef"><b>Definition:</b> syscalls.h:34</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a96184290ffb60e04c53a52869cf960a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pthread_mutex_unlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pthread_8h.html#aa13253d3ede7200917f21c685a49d256">pthread_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>unlock the referenced mutex If the mutex does not exist or is not locked or has been locked by another, this is an error that causes exit with error </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>a pointer referencing a mutex </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, 1 on fealure </dd></dl>

<p>References <a class="el" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a>, and <a class="el" href="syscalls_8h.html#a71247681fc657059e83f9bcf64068fe7">SYSCALL_MUTEX_UNLOCK</a>.</p>
<div class="fragment"><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;{</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a> ((<span class="keywordtype">int</span>)mutex, 0, 0, 0, <a class="code" href="syscalls_8h.html#a71247681fc657059e83f9bcf64068fe7">SYSCALL_MUTEX_UNLOCK</a>);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div>
<div class="ttc" id="mips_2cpu__user_8S_html_a2824a7b580dd3afd46068b42af360fa6"><div class="ttname"><a href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a></div><div class="ttdeci">globl syscall_fct syscall_fct</div><div class="ttdef"><b>Definition:</b> cpu_user.S:21</div></div>
<div class="ttc" id="syscalls_8h_html_a71247681fc657059e83f9bcf64068fe7"><div class="ttname"><a href="syscalls_8h.html#a71247681fc657059e83f9bcf64068fe7">SYSCALL_MUTEX_UNLOCK</a></div><div class="ttdeci">#define SYSCALL_MUTEX_UNLOCK</div><div class="ttdef"><b>Definition:</b> syscalls.h:35</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aeff2e6e14c407e3d02076ecae842bcca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pthread_yield </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Causes the current thread to give up the CPU in order to give it to another. </p>

<p>References <a class="el" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a>, and <a class="el" href="syscalls_8h.html#a26a363c5f0ee06e0eec9cc16ed64a2fd">SYSCALL_THREAD_YIELD</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;{</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a> (0, 0, 0, 0, <a class="code" href="syscalls_8h.html#a26a363c5f0ee06e0eec9cc16ed64a2fd">SYSCALL_THREAD_YIELD</a>);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;}</div>
<div class="ttc" id="mips_2cpu__user_8S_html_a2824a7b580dd3afd46068b42af360fa6"><div class="ttname"><a href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a></div><div class="ttdeci">globl syscall_fct syscall_fct</div><div class="ttdef"><b>Definition:</b> cpu_user.S:21</div></div>
<div class="ttc" id="syscalls_8h_html_a26a363c5f0ee06e0eec9cc16ed64a2fd"><div class="ttname"><a href="syscalls_8h.html#a26a363c5f0ee06e0eec9cc16ed64a2fd">SYSCALL_THREAD_YIELD</a></div><div class="ttdeci">#define SYSCALL_THREAD_YIELD</div><div class="ttdef"><b>Definition:</b> syscalls.h:29</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a02cfe68dc8f379c88d448172f997b09e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sched_dump </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Displays on the console (tty0) all active threads, it is for debugging. </p>

<p>References <a class="el" href="structthread__s.html#a5cdab21069c6c184a86d024a0aa238aa">thread_s::arg</a>, <a class="el" href="mips_2cpuregs_8S.html#af7e0f9f0eada9d28b46b4d1f7ae5b702">clock</a>, <a class="el" href="kthread_8c.html#af316c33cc298530f245e8b55330e86b5">D</a>, <a class="el" href="errno_8c.html#a752b191220a1b00e3d70f9359a660f0f">errno_mess</a>, <a class="el" href="structthread__s.html#a9a97385576dda275389e95ef13168cfc">thread_s::fun</a>, <a class="el" href="structthread__s.html#a84fafe08d8ef25fc4b5a8fb1e833619c">thread_s::join</a>, <a class="el" href="klibc_8c.html#ac4ae3bb8e59735d2b772e77186b52228">kprintf()</a>, <a class="el" href="structthread__s.html#a1159b3f03199aed705bf099f2eb33a92">thread_s::kstack</a>, <a class="el" href="structthread__s.html#a6885e765fcfe5d2ad0e5a07c2df3ee69">thread_s::kstack_b</a>, <a class="el" href="structlist__s.html#a3fe402fa883820f9823c1e47246f9880">list_s::next</a>, <a class="el" href="kthread_8c.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>, <a class="el" href="structlist__s.html#af220645f4ec4f64798bc6d8ea9765185">list_s::prev</a>, <a class="el" href="structthread__s.html#a7ad218d5b7c4b6bc9c4602e6b1a89815">thread_s::ptls</a>, <a class="el" href="structthread__s.html#aeefa131a48c8c3c45e6c3c0819f21cd0">thread_s::retval</a>, <a class="el" href="kthread_8c.html#af933676109efed7ab34cea71d748a517">S</a>, <a class="el" href="structthread__s.html#a63551d8e6d21a7370c5b3652cea282fc">thread_s::start</a>, <a class="el" href="structthread__s.html#ab3fce89938b5156047553299f71a1370">thread_s::state</a>, <a class="el" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a>, <a class="el" href="syscalls_8h.html#ac3d987610a2daf21c3e994f890feecab">SYSCALL_SCHED_DUMP</a>, <a class="el" href="kthread_8h.html#aeae3234bde1a15d5c671a41286949bc5">TH_STATE_DEAD</a>, <a class="el" href="kthread_8h.html#a1887e40b17ecfda05b4a398375d527fb">TH_STATE_READY</a>, <a class="el" href="kthread_8h.html#a83c4c9d919043cd3b5bac98b7250d506">TH_STATE_RUNNING</a>, <a class="el" href="kthread_8h.html#a75c1c2f7da0a338d818a2950b582b74a">TH_STATE_WAIT</a>, <a class="el" href="kthread_8h.html#a55287315008b2fea47936dc065bbabb7">TH_STATE_ZOMBIE</a>, <a class="el" href="kthread_8h.html#ad90e71a21f2353f675f63fee7aff63a7">TH_TYPE_KERNEL</a>, <a class="el" href="kthread_8h.html#ab47e8c012560fa0368dfd3f6e45e07b5">TH_TYPE_USER</a>, <a class="el" href="kthread_8h.html#a425c1da89e5866d87fc20a624da7cbec">THREAD_MAX</a>, <a class="el" href="kthread_8c.html#ae48ff9d5d8665f90c44ae6ad4acb5b6d">ThreadCurrentIdx</a>, <a class="el" href="structthread__s.html#ad1ed1d821f595f5a7c1d68f09ba36bf5">thread_s::tid</a>, <a class="el" href="struct__tls__s.html#a2b0505d872f110754ab80cdfe94bf58e">_tls_s::tls_errno</a>, <a class="el" href="structthread__s.html#a2eda0c064f0ed88103b27bf2b5a640e2">thread_s::type</a>, <a class="el" href="structthread__s.html#a8d51270c2f7572479276f7629940c3ea">thread_s::ustack_b</a>, <a class="el" href="structthread__s.html#a021e8a50ddb4a5978f18d6babfc4ea6e">thread_s::ustack_e</a>, <a class="el" href="kthread_8c.html#a649b8f01fd6c0f47ff3cbddaeba63bfb">W</a>, <a class="el" href="structthread__s.html#a291769866cccb5d37937ef14cedc38bf">thread_s::wait</a>, and <a class="el" href="kthread_8c.html#a798e4073d613ca5ba9618e1b3253df14">Y</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a> (0, 0, 0, 0, <a class="code" href="syscalls_8h.html#ac3d987610a2daf21c3e994f890feecab">SYSCALL_SCHED_DUMP</a>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div>
<div class="ttc" id="mips_2cpu__user_8S_html_a2824a7b580dd3afd46068b42af360fa6"><div class="ttname"><a href="mips_2cpu__user_8S.html#a2824a7b580dd3afd46068b42af360fa6">syscall_fct</a></div><div class="ttdeci">globl syscall_fct syscall_fct</div><div class="ttdef"><b>Definition:</b> cpu_user.S:21</div></div>
<div class="ttc" id="syscalls_8h_html_ac3d987610a2daf21c3e994f890feecab"><div class="ttname"><a href="syscalls_8h.html#ac3d987610a2daf21c3e994f890feecab">SYSCALL_SCHED_DUMP</a></div><div class="ttdeci">#define SYSCALL_SCHED_DUMP</div><div class="ttdef"><b>Definition:</b> syscalls.h:31</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a334f18a58e25ecc72e490c91cea67547"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void thread_start </td>
          <td>(</td>
          <td class="paramtype">void *(*)(void *)&#160;</td>
          <td class="paramname"><em>fun</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>pthread_start is the function called by the kernel at the true start of a thread </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fun</td><td>is the thread's function (the one defined in the user application) </td></tr>
    <tr><td class="paramname">arg</td><td>is the thread argument, which will be given to the function fun </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="pthread_8c.html#a23b28e0f8ac5af2b46a33cdab3a80e44">pthread_exit()</a>.</p>

<p>Referenced by <a class="el" href="pthread_8h.html#a57aa485fb15bd7f307777cef1a074d28">pthread_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;{</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">//    urandseed = 1;             // initialise the user random seed (present in the tls) </span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keywordtype">void</span> * retval = fun (arg); <span class="comment">// call the function with its arg (maybe, it will call thread_exit())</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <a class="code" href="pthread_8c.html#a23b28e0f8ac5af2b46a33cdab3a80e44">pthread_exit</a>(retval);      <span class="comment">// otherwise, if fun ends, ask the kernel to exit the thread</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;}</div>
<div class="ttc" id="pthread_8c_html_a23b28e0f8ac5af2b46a33cdab3a80e44"><div class="ttname"><a href="pthread_8c.html#a23b28e0f8ac5af2b46a33cdab3a80e44">pthread_exit</a></div><div class="ttdeci">void pthread_exit(void *retval)</div><div class="ttdoc">terminates the current thread and returns retval </div><div class="ttdef"><b>Definition:</b> pthread.c:45</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
