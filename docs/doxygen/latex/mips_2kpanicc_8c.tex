\hypertarget{mips_2kpanicc_8c}{\section{/users/enseig/franck/ko6/src/soft/hal/cpu/mips/kpanicc.c File Reference}
\label{mips_2kpanicc_8c}\index{/users/enseig/franck/ko6/src/soft/hal/cpu/mips/kpanicc.\-c@{/users/enseig/franck/ko6/src/soft/hal/cpu/mips/kpanicc.\-c}}
}
{\ttfamily \#include $<$hal/cpu/mips/context.\-h$>$}\\*
{\ttfamily \#include $<$kernel/klibc.\-h$>$}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{mips_2kpanicc_8c_a065995e33e52287fdb635c739984fa4c}{kdump} (unsigned reg\-\_\-tab\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em dump all registers values from a table filled by \hyperlink{mips_2kpanica_8S_a7f530336b5f1563eee0a1052ea0d4a9b}{kpanic()} then exit program this function cannot be static because it is used by hcpua.\-S file \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
unsigned \hyperlink{mips_2kpanicc_8c_a0082ae414fed384bc55eb64768a5d4d6}{K\-Panic\-Regs\-Val} \mbox{[}\hyperlink{riscv_2context_8h_a2c9f87500759b1f7dd423ee12268f6b5}{K\-P\-A\-N\-I\-C\-\_\-\-R\-E\-G\-S\-\_\-\-N\-R}\mbox{]}
\begin{DoxyCompactList}\small\item\em Table filled by \hyperlink{mips_2kpanica_8S_a7f530336b5f1563eee0a1052ea0d4a9b}{kpanic()} and read by kdump this table cannot be static because it is used by kpanica.\-S file. \end{DoxyCompactList}\item 
static char $\ast$ \hyperlink{mips_2kpanicc_8c_a76b8b4812a3bad464e7cc3e391d931d2}{K\-Panic\-Regs\-Name} \mbox{[}\hyperlink{riscv_2context_8h_a2c9f87500759b1f7dd423ee12268f6b5}{K\-P\-A\-N\-I\-C\-\_\-\-R\-E\-G\-S\-\_\-\-N\-R}\mbox{]}
\begin{DoxyCompactList}\small\item\em register name, the order must the same as defined in hcpu\-\_\-soc.\-h files \end{DoxyCompactList}\item 
static char $\ast$ \hyperlink{mips_2kpanicc_8c_ae98da7a52862732025c0c833a6776aec}{K\-Panic\-Cause\-Name} \mbox{[}16\mbox{]}
\begin{DoxyCompactList}\small\item\em cause name \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{mips_2kpanicc_8c_a065995e33e52287fdb635c739984fa4c}{\index{mips/kpanicc.\-c@{mips/kpanicc.\-c}!kdump@{kdump}}
\index{kdump@{kdump}!mips/kpanicc.c@{mips/kpanicc.\-c}}
\subsubsection[{kdump}]{\setlength{\rightskip}{0pt plus 5cm}void kdump (
\begin{DoxyParamCaption}
\item[{unsigned}]{reg\-\_\-tab\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}}\label{mips_2kpanicc_8c_a065995e33e52287fdb635c739984fa4c}


dump all registers values from a table filled by \hyperlink{mips_2kpanica_8S_a7f530336b5f1563eee0a1052ea0d4a9b}{kpanic()} then exit program this function cannot be static because it is used by hcpua.\-S file 



References K\-P\-A\-N\-I\-C\-\_\-\-C\-O\-U\-N\-T, K\-P\-A\-N\-I\-C\-\_\-\-E\-P\-C, K\-P\-A\-N\-I\-C\-\_\-\-R\-E\-G\-S\-\_\-\-N\-R, K\-Panic\-Cause\-Name, K\-Panic\-Regs\-Name, K\-Panic\-Regs\-Val, kprintf(), and sched\-\_\-dump().


\begin{DoxyCode}
57 \{
58     \textcolor{keywordtype}{int} nl = 0;
59     \textcolor{keywordtype}{int} cause = (\hyperlink{mips_2kpanicc_8c_a0082ae414fed384bc55eb64768a5d4d6}{KPanicRegsVal}[0] >> 2) & 0xF;
60 
61     \hyperlink{klibc_8c_ac4ae3bb8e59735d2b772e77186b52228}{kprintf} (\textcolor{stringliteral}{"\(\backslash\)n[%d] <%p> KERNEL PANIC: %s\(\backslash\)n\(\backslash\)n"},
62             \hyperlink{mips_2kpanicc_8c_a0082ae414fed384bc55eb64768a5d4d6}{KPanicRegsVal}[\hyperlink{mips_2context_8h_a0344be8a8c2f52090340fb76cc682937}{KPANIC\_COUNT}],                \textcolor{comment}{// TSC Time Stamp Counter}
63             \hyperlink{mips_2kpanicc_8c_a0082ae414fed384bc55eb64768a5d4d6}{KPanicRegsVal}[\hyperlink{mips_2context_8h_ac16e16f545d1a8ff3edf15f544ffd832}{KPANIC\_EPC}],                  \textcolor{comment}{// faulty instruction
       address}
64             \hyperlink{mips_2kpanicc_8c_ae98da7a52862732025c0c833a6776aec}{KPanicCauseName}[cause]);                    \textcolor{comment}{// Comprehensive cause name}
65 
66     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < \hyperlink{mips_2context_8h_a2c9f87500759b1f7dd423ee12268f6b5}{KPANIC\_REGS\_NR}; i++) \{
67         \hyperlink{klibc_8c_ac4ae3bb8e59735d2b772e77186b52228}{kprintf} (\textcolor{stringliteral}{"%s : %p     "}, \hyperlink{mips_2kpanicc_8c_a76b8b4812a3bad464e7cc3e391d931d2}{KPanicRegsName}[i], 
      \hyperlink{mips_2kpanicc_8c_a0082ae414fed384bc55eb64768a5d4d6}{KPanicRegsVal}[i]);
68         \textcolor{keywordflow}{if} (++nl == 4) \{
69             \hyperlink{klibc_8c_ac4ae3bb8e59735d2b772e77186b52228}{kprintf} (\textcolor{stringliteral}{"\(\backslash\)n"});
70             nl = 0;
71         \}
72     \}
73     \hyperlink{kthread_8c_a02cfe68dc8f379c88d448172f997b09e}{sched\_dump}();
74     \textcolor{keywordflow}{while} (1); \textcolor{comment}{// never returns}
75 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{mips_2kpanicc_8c_ae98da7a52862732025c0c833a6776aec}{\index{mips/kpanicc.\-c@{mips/kpanicc.\-c}!K\-Panic\-Cause\-Name@{K\-Panic\-Cause\-Name}}
\index{K\-Panic\-Cause\-Name@{K\-Panic\-Cause\-Name}!mips/kpanicc.c@{mips/kpanicc.\-c}}
\subsubsection[{K\-Panic\-Cause\-Name}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ K\-Panic\-Cause\-Name\mbox{[}16\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{mips_2kpanicc_8c_ae98da7a52862732025c0c833a6776aec}
{\bfseries Initial value\-:}
\begin{DoxyCode}
= \{
    [0 ... 15] = \textcolor{stringliteral}{"Other cause or Application exit()"},   
    [4] = \textcolor{stringliteral}{"ADEL: Illegal load address"},
    [5] = \textcolor{stringliteral}{"ADES: Illegal store address"},
    [6] = \textcolor{stringliteral}{"IBE:  Segmentation fault for intruction"},
    [7] = \textcolor{stringliteral}{"DBE:  Segmentation fault for data"},
    [10] = \textcolor{stringliteral}{"RI:   Illegal instruction"},
    [11] = \textcolor{stringliteral}{"CPU:  coprocessor unreachable"},
    [12] = \textcolor{stringliteral}{"OVF:  Overflow"},
    [13] = \textcolor{stringliteral}{"DIV:  Division by 0"},                       
\}
\end{DoxyCode}


cause name 



Referenced by kdump().

\hypertarget{mips_2kpanicc_8c_a76b8b4812a3bad464e7cc3e391d931d2}{\index{mips/kpanicc.\-c@{mips/kpanicc.\-c}!K\-Panic\-Regs\-Name@{K\-Panic\-Regs\-Name}}
\index{K\-Panic\-Regs\-Name@{K\-Panic\-Regs\-Name}!mips/kpanicc.c@{mips/kpanicc.\-c}}
\subsubsection[{K\-Panic\-Regs\-Name}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ K\-Panic\-Regs\-Name\mbox{[}{\bf K\-P\-A\-N\-I\-C\-\_\-\-R\-E\-G\-S\-\_\-\-N\-R}\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{mips_2kpanicc_8c_a76b8b4812a3bad464e7cc3e391d931d2}
{\bfseries Initial value\-:}
\begin{DoxyCode}
= \{
    \textcolor{stringliteral}{"CR "}, \textcolor{stringliteral}{"AT "}, \textcolor{stringliteral}{"V0 "}, \textcolor{stringliteral}{"V1 "}, \textcolor{stringliteral}{"A0 "}, \textcolor{stringliteral}{"A1 "}, \textcolor{stringliteral}{"A2 "}, \textcolor{stringliteral}{"A3 "},
    \textcolor{stringliteral}{"T0 "}, \textcolor{stringliteral}{"T1 "}, \textcolor{stringliteral}{"T2 "}, \textcolor{stringliteral}{"T3 "}, \textcolor{stringliteral}{"T4 "}, \textcolor{stringliteral}{"T5 "}, \textcolor{stringliteral}{"T6 "}, \textcolor{stringliteral}{"T7 "},
    \textcolor{stringliteral}{"S0 "}, \textcolor{stringliteral}{"S1 "}, \textcolor{stringliteral}{"S2 "}, \textcolor{stringliteral}{"S3 "}, \textcolor{stringliteral}{"S4 "}, \textcolor{stringliteral}{"S5 "}, \textcolor{stringliteral}{"S6 "}, \textcolor{stringliteral}{"S7 "},
    \textcolor{stringliteral}{"T8 "}, \textcolor{stringliteral}{"T9 "}, \textcolor{stringliteral}{"HI "}, \textcolor{stringliteral}{"LO "}, \textcolor{stringliteral}{"GP "}, \textcolor{stringliteral}{"SP "}, \textcolor{stringliteral}{"FP "}, \textcolor{stringliteral}{"RA "},
    \textcolor{stringliteral}{"TSC"}, \textcolor{stringliteral}{"BAR"}, \textcolor{stringliteral}{"SR "}, \textcolor{stringliteral}{"EPC"}
\}
\end{DoxyCode}


register name, the order must the same as defined in hcpu\-\_\-soc.\-h files 



Referenced by kdump().

\hypertarget{mips_2kpanicc_8c_a0082ae414fed384bc55eb64768a5d4d6}{\index{mips/kpanicc.\-c@{mips/kpanicc.\-c}!K\-Panic\-Regs\-Val@{K\-Panic\-Regs\-Val}}
\index{K\-Panic\-Regs\-Val@{K\-Panic\-Regs\-Val}!mips/kpanicc.c@{mips/kpanicc.\-c}}
\subsubsection[{K\-Panic\-Regs\-Val}]{\setlength{\rightskip}{0pt plus 5cm}unsigned K\-Panic\-Regs\-Val\mbox{[}{\bf K\-P\-A\-N\-I\-C\-\_\-\-R\-E\-G\-S\-\_\-\-N\-R}\mbox{]}}}\label{mips_2kpanicc_8c_a0082ae414fed384bc55eb64768a5d4d6}


Table filled by \hyperlink{mips_2kpanica_8S_a7f530336b5f1563eee0a1052ea0d4a9b}{kpanic()} and read by kdump this table cannot be static because it is used by kpanica.\-S file. 



Referenced by kdump().

