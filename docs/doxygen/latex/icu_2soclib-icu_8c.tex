\hypertarget{icu_2soclib-icu_8c}{\section{/users/enseig/franck/ko6/src/soft/hal/devices/icu/soclib-\/icu.c File Reference}
\label{icu_2soclib-icu_8c}\index{/users/enseig/franck/ko6/src/soft/hal/devices/icu/soclib-\/icu.\-c@{/users/enseig/franck/ko6/src/soft/hal/devices/icu/soclib-\/icu.\-c}}
}
{\ttfamily \#include $<$hal/devices/icu/soclib-\/icu.\-h$>$}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{icu_2soclib-icu_8c_a291831fe78dd1a558504a84a5685199b}{soclib\-\_\-icu\-\_\-init} (struct \hyperlink{structicu__s}{icu\-\_\-s} $\ast$icu, unsigned address)
\begin{DoxyCompactList}\small\item\em Initialize the soclib icu device. \end{DoxyCompactList}\item 
static unsigned \hyperlink{icu_2soclib-icu_8c_a31bf159c6e02e1717177273e6a74d374}{soclib\-\_\-icu\-\_\-get\-\_\-highest} (struct \hyperlink{structicu__s}{icu\-\_\-s} $\ast$icu)
\begin{DoxyCompactList}\small\item\em get the highest priority irq number for this I\-C\-U instance \end{DoxyCompactList}\item 
static void \hyperlink{icu_2soclib-icu_8c_a29d2109ae12995fb60a2a9f278281e4f}{soclib\-\_\-icu\-\_\-set\-\_\-priority} (struct \hyperlink{structicu__s}{icu\-\_\-s} $\ast$icu, unsigned irq, unsigned pri)
\item 
static void \hyperlink{icu_2soclib-icu_8c_a924a53d9cd3a4685a608fe6ec5efdca8}{soclib\-\_\-icu\-\_\-acknowledge} (struct \hyperlink{structicu__s}{icu\-\_\-s} $\ast$icu, unsigned irq)
\item 
static void \hyperlink{icu_2soclib-icu_8c_a7fcbcc6fb620f7a6ed3082b7053ce0e1}{soclib\-\_\-icu\-\_\-unmask} (struct \hyperlink{structicu__s}{icu\-\_\-s} $\ast$icu, unsigned irq)
\begin{DoxyCompactList}\small\item\em Unmask the I\-R\-Q (enable it), (write 1 in the corresponding S\-E\-T bit) \end{DoxyCompactList}\item 
static void \hyperlink{icu_2soclib-icu_8c_a97854aad88a8ec5625b03d30cc0246e4}{soclib\-\_\-icu\-\_\-mask} (struct \hyperlink{structicu__s}{icu\-\_\-s} $\ast$icu, unsigned irq)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structicu__ops__s}{icu\-\_\-ops\-\_\-s} \hyperlink{icu_2soclib-icu_8c_a57148fb85883dc5ca0480a7b55398c58}{Soclib\-I\-C\-U\-Ops}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{icu_2soclib-icu_8c_a924a53d9cd3a4685a608fe6ec5efdca8}{\index{icu/soclib-\/icu.\-c@{icu/soclib-\/icu.\-c}!soclib\-\_\-icu\-\_\-acknowledge@{soclib\-\_\-icu\-\_\-acknowledge}}
\index{soclib\-\_\-icu\-\_\-acknowledge@{soclib\-\_\-icu\-\_\-acknowledge}!icu/soclib-icu.c@{icu/soclib-\/icu.\-c}}
\subsubsection[{soclib\-\_\-icu\-\_\-acknowledge}]{\setlength{\rightskip}{0pt plus 5cm}static void soclib\-\_\-icu\-\_\-acknowledge (
\begin{DoxyParamCaption}
\item[{struct {\bf icu\-\_\-s} $\ast$}]{icu, }
\item[{unsigned}]{irq}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{icu_2soclib-icu_8c_a924a53d9cd3a4685a608fe6ec5efdca8}

\begin{DoxyCode}
46 \{
47     \textcolor{comment}{/* Not implemented */}
48     ;
49 \}
\end{DoxyCode}
\hypertarget{icu_2soclib-icu_8c_a31bf159c6e02e1717177273e6a74d374}{\index{icu/soclib-\/icu.\-c@{icu/soclib-\/icu.\-c}!soclib\-\_\-icu\-\_\-get\-\_\-highest@{soclib\-\_\-icu\-\_\-get\-\_\-highest}}
\index{soclib\-\_\-icu\-\_\-get\-\_\-highest@{soclib\-\_\-icu\-\_\-get\-\_\-highest}!icu/soclib-icu.c@{icu/soclib-\/icu.\-c}}
\subsubsection[{soclib\-\_\-icu\-\_\-get\-\_\-highest}]{\setlength{\rightskip}{0pt plus 5cm}static unsigned soclib\-\_\-icu\-\_\-get\-\_\-highest (
\begin{DoxyParamCaption}
\item[{struct {\bf icu\-\_\-s} $\ast$}]{icu}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{icu_2soclib-icu_8c_a31bf159c6e02e1717177273e6a74d374}


get the highest priority irq number for this I\-C\-U instance 


\begin{DoxyParams}{Parameters}
{\em icu} & icu the icu struct \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the highest priorty irq number that is for this I\-C\-U the lowest irq number 
\end{DoxyReturn}


References icu\-\_\-s\-::address, and soclib\-\_\-icu\-\_\-regs\-\_\-s\-::highest.


\begin{DoxyCode}
33 \{
34     \textcolor{keyword}{struct }\hyperlink{structsoclib__icu__regs__s}{soclib\_icu\_regs\_s} *regs =
35         (\textcolor{keyword}{struct }\hyperlink{structsoclib__icu__regs__s}{soclib\_icu\_regs\_s} *) icu->\hyperlink{structicu__s_a4ad14d6fcd630faa41a55ed2037bcf8f}{address};
36     \textcolor{keywordflow}{return} regs->\hyperlink{structsoclib__icu__regs__s_ad5b9303a7fc90c52cb55445faeb8b609}{highest};
37 \}
\end{DoxyCode}
\hypertarget{icu_2soclib-icu_8c_a291831fe78dd1a558504a84a5685199b}{\index{icu/soclib-\/icu.\-c@{icu/soclib-\/icu.\-c}!soclib\-\_\-icu\-\_\-init@{soclib\-\_\-icu\-\_\-init}}
\index{soclib\-\_\-icu\-\_\-init@{soclib\-\_\-icu\-\_\-init}!icu/soclib-icu.c@{icu/soclib-\/icu.\-c}}
\subsubsection[{soclib\-\_\-icu\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}static void soclib\-\_\-icu\-\_\-init (
\begin{DoxyParamCaption}
\item[{struct {\bf icu\-\_\-s} $\ast$}]{icu, }
\item[{unsigned}]{address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{icu_2soclib-icu_8c_a291831fe78dd1a558504a84a5685199b}


Initialize the soclib icu device. 


\begin{DoxyParams}{Parameters}
{\em icu} & icu device to initialize \\
\hline
{\em address} & address of the physical device \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
nothing 
\end{DoxyReturn}


References icu\-\_\-s\-::address, icu\-\_\-s\-::ops, and Soclib\-I\-C\-U\-Ops.


\begin{DoxyCode}
22 \{
23     icu->\hyperlink{structicu__s_a7f989a94a922fa1c782cfcf7547bd8c5}{ops}        = &\hyperlink{icu_2soclib-icu_8c_a57148fb85883dc5ca0480a7b55398c58}{SoclibICUOps};
24     icu->\hyperlink{structicu__s_a4ad14d6fcd630faa41a55ed2037bcf8f}{address}    = address;
25 \}
\end{DoxyCode}
\hypertarget{icu_2soclib-icu_8c_a97854aad88a8ec5625b03d30cc0246e4}{\index{icu/soclib-\/icu.\-c@{icu/soclib-\/icu.\-c}!soclib\-\_\-icu\-\_\-mask@{soclib\-\_\-icu\-\_\-mask}}
\index{soclib\-\_\-icu\-\_\-mask@{soclib\-\_\-icu\-\_\-mask}!icu/soclib-icu.c@{icu/soclib-\/icu.\-c}}
\subsubsection[{soclib\-\_\-icu\-\_\-mask}]{\setlength{\rightskip}{0pt plus 5cm}static void soclib\-\_\-icu\-\_\-mask (
\begin{DoxyParamCaption}
\item[{struct {\bf icu\-\_\-s} $\ast$}]{icu, }
\item[{unsigned}]{irq}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{icu_2soclib-icu_8c_a97854aad88a8ec5625b03d30cc0246e4}

\begin{DoxyCode}
65 \{
66     \textcolor{comment}{/* Not implemented */}
67     ;
68 \}
\end{DoxyCode}
\hypertarget{icu_2soclib-icu_8c_a29d2109ae12995fb60a2a9f278281e4f}{\index{icu/soclib-\/icu.\-c@{icu/soclib-\/icu.\-c}!soclib\-\_\-icu\-\_\-set\-\_\-priority@{soclib\-\_\-icu\-\_\-set\-\_\-priority}}
\index{soclib\-\_\-icu\-\_\-set\-\_\-priority@{soclib\-\_\-icu\-\_\-set\-\_\-priority}!icu/soclib-icu.c@{icu/soclib-\/icu.\-c}}
\subsubsection[{soclib\-\_\-icu\-\_\-set\-\_\-priority}]{\setlength{\rightskip}{0pt plus 5cm}static void soclib\-\_\-icu\-\_\-set\-\_\-priority (
\begin{DoxyParamCaption}
\item[{struct {\bf icu\-\_\-s} $\ast$}]{icu, }
\item[{unsigned}]{irq, }
\item[{unsigned}]{pri}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{icu_2soclib-icu_8c_a29d2109ae12995fb60a2a9f278281e4f}

\begin{DoxyCode}
40 \{
41     \textcolor{comment}{/* Not implemented */}
42     ;
43 \}
\end{DoxyCode}
\hypertarget{icu_2soclib-icu_8c_a7fcbcc6fb620f7a6ed3082b7053ce0e1}{\index{icu/soclib-\/icu.\-c@{icu/soclib-\/icu.\-c}!soclib\-\_\-icu\-\_\-unmask@{soclib\-\_\-icu\-\_\-unmask}}
\index{soclib\-\_\-icu\-\_\-unmask@{soclib\-\_\-icu\-\_\-unmask}!icu/soclib-icu.c@{icu/soclib-\/icu.\-c}}
\subsubsection[{soclib\-\_\-icu\-\_\-unmask}]{\setlength{\rightskip}{0pt plus 5cm}static void soclib\-\_\-icu\-\_\-unmask (
\begin{DoxyParamCaption}
\item[{struct {\bf icu\-\_\-s} $\ast$}]{icu, }
\item[{unsigned}]{irq}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{icu_2soclib-icu_8c_a7fcbcc6fb620f7a6ed3082b7053ce0e1}


Unmask the I\-R\-Q (enable it), (write 1 in the corresponding S\-E\-T bit) 


\begin{DoxyParams}{Parameters}
{\em icu} & icu device \\
\hline
{\em irq} & target irq \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
nothing 
\end{DoxyReturn}


References icu\-\_\-s\-::address, and soclib\-\_\-icu\-\_\-regs\-\_\-s\-::set.


\begin{DoxyCode}
58 \{
59     \textcolor{keyword}{struct }\hyperlink{structsoclib__icu__regs__s}{soclib\_icu\_regs\_s} *regs =
60         (\textcolor{keyword}{struct }\hyperlink{structsoclib__icu__regs__s}{soclib\_icu\_regs\_s} *) icu->\hyperlink{structicu__s_a4ad14d6fcd630faa41a55ed2037bcf8f}{address};
61     regs->\hyperlink{structsoclib__icu__regs__s_ac739bbbb3c2ebdd3e56126a8f894809b}{set} = 1 << irq;
62 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{icu_2soclib-icu_8c_a57148fb85883dc5ca0480a7b55398c58}{\index{icu/soclib-\/icu.\-c@{icu/soclib-\/icu.\-c}!Soclib\-I\-C\-U\-Ops@{Soclib\-I\-C\-U\-Ops}}
\index{Soclib\-I\-C\-U\-Ops@{Soclib\-I\-C\-U\-Ops}!icu/soclib-icu.c@{icu/soclib-\/icu.\-c}}
\subsubsection[{Soclib\-I\-C\-U\-Ops}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf icu\-\_\-ops\-\_\-s} Soclib\-I\-C\-U\-Ops}}\label{icu_2soclib-icu_8c_a57148fb85883dc5ca0480a7b55398c58}
{\bfseries Initial value\-:}
\begin{DoxyCode}
= \{
    .icu\_acknowledge = \hyperlink{icu_2soclib-icu_8c_a924a53d9cd3a4685a608fe6ec5efdca8}{soclib\_icu\_acknowledge},
    .icu\_get\_highest = \hyperlink{icu_2soclib-icu_8c_a31bf159c6e02e1717177273e6a74d374}{soclib\_icu\_get\_highest},
    .icu\_init = \hyperlink{icu_2soclib-icu_8c_a291831fe78dd1a558504a84a5685199b}{soclib\_icu\_init},
    .icu\_mask = \hyperlink{icu_2soclib-icu_8c_a97854aad88a8ec5625b03d30cc0246e4}{soclib\_icu\_mask},
    .icu\_set\_priority = \hyperlink{icu_2soclib-icu_8c_a29d2109ae12995fb60a2a9f278281e4f}{soclib\_icu\_set\_priority},
    .icu\_unmask = \hyperlink{icu_2soclib-icu_8c_a7fcbcc6fb620f7a6ed3082b7053ce0e1}{soclib\_icu\_unmask}
\}
\end{DoxyCode}


Referenced by soc\-\_\-icu\-\_\-init(), and soclib\-\_\-icu\-\_\-init().

