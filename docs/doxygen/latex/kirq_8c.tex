\hypertarget{kirq_8c}{\section{/users/enseig/franck/ko6/src/soft/kernel/kirq.c File Reference}
\label{kirq_8c}\index{/users/enseig/franck/ko6/src/soft/kernel/kirq.\-c@{/users/enseig/franck/ko6/src/soft/kernel/kirq.\-c}}
}
{\ttfamily \#include $<$kernel/kirq.\-h$>$}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{kirq_8c_a7bb6fb99500c6f10708c7653cef722e8}{register\-\_\-interrupt} (unsigned irq, \hyperlink{kirq_8h_a6c476c213249d7236d7888257e71628d}{isr\-\_\-t} handler, void $\ast$arg)
\begin{DoxyCompactList}\small\item\em Assign an I\-S\-R (Interrupt-\/\-Service Routine) to an I\-R\-Q. \end{DoxyCompactList}\item 
void \hyperlink{kirq_8c_aa9ad3c6e921343d32bd93189e56344ac}{route\-\_\-interrupt} (unsigned irq)
\begin{DoxyCompactList}\small\item\em Call the I\-S\-R of a given I\-R\-Q. \end{DoxyCompactList}\item 
void \hyperlink{kirq_8c_a24b6c39fc1dc2637e3ef54514f60ac9a}{unregister\-\_\-interrupt} (unsigned irq)
\begin{DoxyCompactList}\small\item\em Remove the I\-S\-R linked to an I\-R\-Q. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static struct \hyperlink{structite__s}{ite\-\_\-s} \hyperlink{kirq_8c_a3d32ff97b6058692226afceace7262a6}{Interrupt\-Vector} \mbox{[}\hyperlink{kirq_8h_aad1c574a2e74abd097cc3e4818711325}{M\-A\-X\-\_\-\-N\-\_\-\-I\-R\-Q\-S}\mbox{]}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{kirq_8c_a7bb6fb99500c6f10708c7653cef722e8}{\index{kirq.\-c@{kirq.\-c}!register\-\_\-interrupt@{register\-\_\-interrupt}}
\index{register\-\_\-interrupt@{register\-\_\-interrupt}!kirq.c@{kirq.\-c}}
\subsubsection[{register\-\_\-interrupt}]{\setlength{\rightskip}{0pt plus 5cm}void register\-\_\-interrupt (
\begin{DoxyParamCaption}
\item[{unsigned}]{irq, }
\item[{{\bf isr\-\_\-t}}]{handler, }
\item[{void $\ast$}]{arg}
\end{DoxyParamCaption}
)}}\label{kirq_8c_a7bb6fb99500c6f10708c7653cef722e8}


Assign an I\-S\-R (Interrupt-\/\-Service Routine) to an I\-R\-Q. 


\begin{DoxyParams}{Parameters}
{\em irq} & the irq \\
\hline
{\em handler} & the I\-S\-R to call \\
\hline
{\em arg} & argument given to the I\-S\-R \\
\hline
\end{DoxyParams}


References ite\-\_\-s\-::arg, ite\-\_\-s\-::handler, and Interrupt\-Vector.



Referenced by soc\-\_\-timer\-\_\-init(), and soc\-\_\-tty\-\_\-init().


\begin{DoxyCode}
18 \{
19     \hyperlink{kirq_8c_a3d32ff97b6058692226afceace7262a6}{InterruptVector}[irq].\hyperlink{structite__s_a1fb9e01b3558413d6d403a33c563dec2}{handler} = handler;
20     \hyperlink{kirq_8c_a3d32ff97b6058692226afceace7262a6}{InterruptVector}[irq].\hyperlink{structite__s_ae704d1dffab809cd86efd3f6bed58db1}{arg} = arg;
21 \}
\end{DoxyCode}
\hypertarget{kirq_8c_aa9ad3c6e921343d32bd93189e56344ac}{\index{kirq.\-c@{kirq.\-c}!route\-\_\-interrupt@{route\-\_\-interrupt}}
\index{route\-\_\-interrupt@{route\-\_\-interrupt}!kirq.c@{kirq.\-c}}
\subsubsection[{route\-\_\-interrupt}]{\setlength{\rightskip}{0pt plus 5cm}void route\-\_\-interrupt (
\begin{DoxyParamCaption}
\item[{unsigned}]{irq}
\end{DoxyParamCaption}
)}}\label{kirq_8c_aa9ad3c6e921343d32bd93189e56344ac}


Call the I\-S\-R of a given I\-R\-Q. 


\begin{DoxyParams}{Parameters}
{\em irq} & the irq \\
\hline
\end{DoxyParams}


References ite\-\_\-s\-::arg, ite\-\_\-s\-::handler, and Interrupt\-Vector.



Referenced by isrcall().


\begin{DoxyCode}
24 \{
25     \textcolor{keyword}{struct }\hyperlink{structite__s}{ite\_s} ite = \hyperlink{kirq_8c_a3d32ff97b6058692226afceace7262a6}{InterruptVector}[irq];
26     \textcolor{keywordflow}{if} (ite.\hyperlink{structite__s_a1fb9e01b3558413d6d403a33c563dec2}{handler})
27         ite.\hyperlink{structite__s_a1fb9e01b3558413d6d403a33c563dec2}{handler}(irq, ite.\hyperlink{structite__s_ae704d1dffab809cd86efd3f6bed58db1}{arg});
28 \}
\end{DoxyCode}
\hypertarget{kirq_8c_a24b6c39fc1dc2637e3ef54514f60ac9a}{\index{kirq.\-c@{kirq.\-c}!unregister\-\_\-interrupt@{unregister\-\_\-interrupt}}
\index{unregister\-\_\-interrupt@{unregister\-\_\-interrupt}!kirq.c@{kirq.\-c}}
\subsubsection[{unregister\-\_\-interrupt}]{\setlength{\rightskip}{0pt plus 5cm}void unregister\-\_\-interrupt (
\begin{DoxyParamCaption}
\item[{unsigned}]{irq}
\end{DoxyParamCaption}
)}}\label{kirq_8c_a24b6c39fc1dc2637e3ef54514f60ac9a}


Remove the I\-S\-R linked to an I\-R\-Q. 


\begin{DoxyParams}{Parameters}
{\em irq} & the irq \\
\hline
\end{DoxyParams}


References ite\-\_\-s\-::arg, ite\-\_\-s\-::handler, and Interrupt\-Vector.


\begin{DoxyCode}
31 \{
32     \textcolor{comment}{// TODO: register kpanic as a default isr, like the old system}
33     \hyperlink{kirq_8c_a3d32ff97b6058692226afceace7262a6}{InterruptVector}[irq].\hyperlink{structite__s_a1fb9e01b3558413d6d403a33c563dec2}{handler} = (\hyperlink{kirq_8h_a6c476c213249d7236d7888257e71628d}{isr\_t}) 0;
34     \hyperlink{kirq_8c_a3d32ff97b6058692226afceace7262a6}{InterruptVector}[irq].\hyperlink{structite__s_ae704d1dffab809cd86efd3f6bed58db1}{arg} = (\textcolor{keywordtype}{void}*) 0;
35 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{kirq_8c_a3d32ff97b6058692226afceace7262a6}{\index{kirq.\-c@{kirq.\-c}!Interrupt\-Vector@{Interrupt\-Vector}}
\index{Interrupt\-Vector@{Interrupt\-Vector}!kirq.c@{kirq.\-c}}
\subsubsection[{Interrupt\-Vector}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf ite\-\_\-s} Interrupt\-Vector\mbox{[}{\bf M\-A\-X\-\_\-\-N\-\_\-\-I\-R\-Q\-S}\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}}\label{kirq_8c_a3d32ff97b6058692226afceace7262a6}


Referenced by register\-\_\-interrupt(), route\-\_\-interrupt(), and unregister\-\_\-interrupt().

